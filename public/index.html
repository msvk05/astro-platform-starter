<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Seedling Reflection</title>

  <style>
    :root{
      --bg:#0b0f14;
      --card:#111826;
      --card2:#0f172a;
      --border:#1f2a3a;
      --text:#e8eef6;
      --muted:#94a3b8;
      --blue:#2563eb;
      --green:#22c55e;
      --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      line-height:1.45;
    }
    .wrap{max-width:980px;margin:0 auto;padding:22px}
    h1,h2,h3{margin:10px 0}
    p{margin:10px 0;color:var(--muted)}
    ul{margin:8px 0 0 18px;color:var(--muted)}
    li{margin:6px 0}
    .topbar{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:12px}
    .brand{display:flex;align-items:center;gap:10px}
    .pill{font-size:12px;padding:6px 10px;border:1px solid var(--border);border-radius:999px;color:var(--muted)}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:14px;
      padding:18px;
      margin-top:14px;
    }
    .progress{height:10px;background:var(--card2);border-radius:999px;overflow:hidden;border:1px solid var(--border)}
    .bar{height:100%;background:var(--green);width:0%}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-top:10px}
    .btn{
      background:var(--blue);
      color:#fff;
      border:none;
      border-radius:10px;
      padding:12px 14px;
      font-weight:650;
      cursor:pointer;
    }
    .btn.secondary{
      background:transparent;
      border:1px solid var(--border);
      color:var(--text);
      font-weight:600;
    }
    .btn.ghost{
      background:transparent;
      color:var(--muted);
      border:1px dashed var(--border);
      font-weight:600;
    }
    .btn:disabled{opacity:.55;cursor:not-allowed}
    .sub{color:var(--muted);font-size:13px}
    .small{font-size:12px;color:var(--muted)}
    .qtitle{font-size:18px;color:var(--text);margin:8px 0}
    .scale{
      display:grid;
      grid-template-columns: repeat(5, 1fr);
      gap:10px;
      margin-top:12px;
    }
    .opt{
      background:var(--card2);
      border:1px solid var(--border);
      border-radius:12px;
      padding:10px;
      cursor:pointer;
      text-align:center;
      user-select:none;
      transition:.1s transform ease;
    }
    .opt:hover{transform:translateY(-1px)}
    .opt strong{display:block;font-size:16px;color:var(--text)}
    .opt span{display:block;font-size:12px;color:var(--muted);margin-top:4px}
    .opt.selected{
      border-color:#60a5fa;
      box-shadow:0 0 0 3px rgba(96,165,250,.15);
    }
    .tip{
      margin-top:12px;
      background:rgba(34,197,94,.08);
      border:1px solid rgba(34,197,94,.25);
      border-radius:12px;
      padding:12px;
    }
    .tip .t1{font-weight:750;color:#b7f7c8}
    .tip .t2{color:var(--muted);margin-top:6px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:820px){.grid2{grid-template-columns:1fr}}
    .tag{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--border);
      color:var(--muted);
      font-size:12px;
      margin-right:8px;
      margin-top:6px;
    }
    .kpi{
      background:var(--card2);
      border:1px solid var(--border);
      border-radius:12px;
      padding:12px;
    }
    .kpi h3{margin:0 0 6px 0;font-size:14px;color:var(--muted)}
    .hr{height:1px;background:var(--border);margin:14px 0}
    input,select,textarea{
      width:100%;
      background:#0b1220;
      border:1px solid var(--border);
      border-radius:10px;
      color:var(--text);
      padding:10px;
      margin-top:6px;
    }
    label{display:block;margin-top:10px;color:var(--muted);font-size:13px}
    .hide{display:none}
    .copybox{
      background:#0b1220;border:1px solid var(--border);border-radius:12px;
      padding:12px;white-space:pre-wrap;color:var(--text);font-size:13px;
    }
    .note{
      border:1px solid rgba(245,158,11,.25);
      background:rgba(245,158,11,.07);
      border-radius:12px;
      padding:12px;
      color:var(--muted);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
     <div class="brand">
  <div style="font-size:32px">üå±</div>
  <div>
    <div class="brandTitle"><B>Seedling Reflection</B></div>
    <div class="brandSubtitle">
      A short self-reflection to understand how you naturally think, work, and grow!
    </div>
  </div>
</div>
      <div class="pill">v1.1 ‚Ä¢ 10 questions ‚Ä¢ ~5 mins</div>
    </div>

    <div class="card">
      <div class="progress"><div class="bar" id="bar"></div></div>
      <div class="row">
        <div class="sub" id="progressText">Progress will appear here once you begin.</div>
        <div class="sub">Scale: 1 (Strongly Disagree) ‚Üí 5 (Strongly Agree)</div>
      </div>
    </div>

    <!-- HOME / INTRO (v1.1) -->
    <div class="card" id="intro">
      <h2>üå± Seedling Assessment - Understand how you naturally think, work, and grow</h2>

      <p class="sub">
        Not a test. Not an exam.<br>
        A short reflection to help you understand your working mindset ‚Äî and what that means for your future.
      </p>

      <div class="hr"></div>

      <h3>Why this matters</h3>
      <p class="sub">
        Most people are taught <b>what</b> to study, not <b>how</b> they work best.<br>
        So they follow trends, advice, or pressure ‚Äî and realise misalignment too late.
      </p>

      <h3>In just 5 minutes, you‚Äôll discover</h3>
      <ul class="sub">
        <li>Your natural working style</li>
        <li>Your hidden strengths and blind spots</li>
        <li>How you learn and decide best</li>
        <li>Where you‚Äôre likely to thrive early</li>
        <li>Simple mindset tips you can apply immediately</li>
      </ul>

      <h3>How it works</h3>
      <ul class="sub">
        <li>Answer 10 thoughtful questions</li>
        <li>Get a personalised perspective report</li>
        <li>Use it to make better next decisions</li>
      </ul>

      <div class="note" style="margin-top:12px">
        There are no right or wrong answers.<br>
        This reflects your <b>current dominant mindset</b>, not your limits.
      </div>

      <div class="row" style="margin-top:14px">
        <button class="btn" onclick="start()">Start the Seedling Reflection</button>
        <button class="btn ghost" onclick="resetAll()">Reset</button>
      </div>

      <div class="small" style="margin-top:10px">
        Tip: Answer honestly. Don‚Äôt try to ‚Äúscore well‚Äù.
      </div>
    </div>

    <!-- QUIZ -->
    <div class="card hide" id="quiz">
      <div class="sub" id="qMeta"></div>
      <div class="qtitle" id="qText"></div>

      <div class="scale" id="scale"></div>

      <div class="tip hide" id="tipBox">
        <div class="t1" id="tipTitle"></div>
        <div class="t2" id="tipText"></div>
      </div>

      <div class="row" style="margin-top:14px">
        <button class="btn secondary" id="prevBtn" onclick="prev()">Back</button>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn ghost" onclick="saveDraft()">Save</button>
          <button class="btn" id="nextBtn" onclick="next()">Next</button>
        </div>
      </div>
      <div class="small" style="margin-top:8px">Saved responses stay in this browser (local).</div>
    </div>

    <!-- RESULTS -->
    <div class="card hide" id="result">
      <h2>Perspective Report</h2>

      <div class="grid2" style="margin-top:12px">
        <div class="card" style="margin-top:0">
          <div class="sub">Your working style</div>
          <div style="font-size:22px;font-weight:900" id="styleName">‚Äî</div>
          <div class="small" id="styleSub">‚Äî</div>

          <div class="hr"></div>
          <div class="sub">Style traits</div>
          <div style="margin-top:10px" id="tags"></div>
        </div>

        <div class="card" style="margin-top:0">
          <div class="sub">‚ú® Perspective Insights</div>
          <h3 style="margin-top:6px">Your hidden superpower</h3>
          <p id="insightText"></p>
          <div class="hr"></div>
          <div class="small"><b>Superhero mindset:</b> <span id="heroMindset"></span></div>
        </div>
      </div>

      <div class="grid2" style="margin-top:12px">
        <div class="kpi">
          <h3>Top strengths</h3>
          <div id="strengths"></div>
        </div>
        <div class="kpi">
          <h3>Watch-outs</h3>
          <div id="watchouts"></div>
        </div>
      </div>

      <!-- NEW v1.1: Everyday Tips + Beyond Work -->
      <div class="grid2" style="margin-top:12px">
        <div class="kpi">
          <h3>üå± Everyday mindset tips</h3>
          <ul id="everydayTips"></ul>
        </div>
        <div class="kpi">
          <h3>How this shows up beyond work</h3>
          <ul id="beyondWork"></ul>
        </div>
      </div>

      <!-- NEW v1.1: If overused -->
      <div class="kpi" style="margin-top:12px">
        <h3>‚ö†Ô∏è If overused</h3>
        <ul id="overuse"></ul>
      </div>

      <div class="grid2" style="margin-top:12px">
        <div class="kpi">
          <h3>Your best learning mode</h3>
          <div id="learningMode"></div>
        </div>
        <div class="kpi">
          <h3>Best-fit paths (early career)</h3>
          <div id="paths"></div>
        </div>
      </div>

      <div class="hr"></div>

      <h3>Next step: Cybersecurity Workshop (optional)</h3>
      <p class="sub">
        If you're curious to explore cybersecurity, join a beginner-friendly workshop with industry experts.
        You‚Äôll get clarity on roles, what to start with, and a simple roadmap.
      </p>

      <div class="card" style="margin-top:12px">
        <h3 style="margin-top:0">Join the waitlist</h3>

        <label>Name
          <input id="wName" placeholder="Your name" />
        </label>

        <label>Email
          <input id="wEmail" placeholder="you@example.com" />
        </label>

        <label>Current status
          <select id="wStatus">
            <option>Student</option>
            <option>Fresher</option>
            <option>Working</option>
            <option>Career switch</option>
          </select>
        </label>

        <label>Interest area
          <select id="wInterest">
            <option>Not sure yet</option>
            <option>SOC / Blue Team</option>
            <option>GRC / Compliance</option>
            <option>AppSec</option>
            <option>Cloud Security</option>
            <option>Threat Intel</option>
          </select>
        </label>

        <label>Biggest challenge (optional)
          <textarea id="wChallenge" rows="3" placeholder="What are you stuck on right now?"></textarea>
        </label>

        <div class="row" style="margin-top:12px">
          <button class="btn" onclick="joinWaitlist()">Email waitlist request</button>
          <button class="btn secondary" onclick="copyResultSummary()">Copy result summary</button>
        </div>

        <div class="small" style="margin-top:8px">
          This will open your email client and send to: <b>seedling.community@gmail.com</b>
        </div>
      </div>

      <div class="hr"></div>

      <h3>Shareable Summary</h3>
      <div class="copybox" id="shareBox"></div>
      <div class="row" style="margin-top:10px">
        <button class="btn secondary" onclick="copyText(document.getElementById('shareBox').innerText)">Copy</button>
        <button class="btn ghost" onclick="restart()">Retake</button>
      </div>
    </div>

  </div>

<script>
  const EMAIL_TO = "seedling.community@gmail.com";

  // ---- Questions (10) with superhero mindset tips ----
  const QUESTIONS = [
    { id:"Q1", dim:"SE", text:"I naturally take ownership and push things to completion, even when others hesitate.",
      tipTitle:"Captain America mindset", tipText:"Leadership starts when you step up, not when you‚Äôre appointed." },

    { id:"Q2", dim:"AT", text:"I prefer breaking problems into smaller parts before jumping to solutions.",
      tipTitle:"Iron Man mindset", tipText:"Clarity comes from understanding the system, not rushing the fix." },

    { id:"Q3", dim:"SE", text:"I‚Äôm comfortable creating a plan and executing it once the direction is clear.",
      tipTitle:"Arjuna mindset", tipText:"Focus beats noise. Pick the target, then commit." },

    { id:"Q4", dim:"SI", text:"I feel energized when collaborating, debating ideas, or brainstorming with others.",
      tipTitle:"Black Panther mindset", tipText:"Build bridges. Strong teams beat solo talent." },

    { id:"Q5", dim:"EC", text:"I often consider how my decisions will impact people emotionally, not just logically.",
      tipTitle:"Hanuman mindset", tipText:"Strength is meaningful when used in service of others." },

    { id:"Q6", dim:"CE", text:"I‚Äôm curious about multiple career paths and dislike being boxed into one role.",
      tipTitle:"Doctor Strange mindset", tipText:"Explore options early‚Äîyour future self will thank you." },

    { id:"Q7", dim:"AT", text:"I enjoy solving complex problems and spotting patterns others miss.",
      tipTitle:"Sherlock-style mindset", tipText:"Your edge is seeing what others overlook‚Äîtrain it daily." },

    { id:"Q8", dim:"EC", text:"In conflicts, I try to keep the relationship intact while still addressing the issue.",
      tipTitle:"Krishna mindset", tipText:"Speak the truth‚Äîbut deliver it with timing and wisdom." },

    { id:"Q9", dim:"SI", text:"I take initiative to network, ask for help, or build communities when needed.",
      tipTitle:"Nick Fury mindset", tipText:"Opportunity comes faster when your network is alive." },

    { id:"Q10", dim:"CE", text:"I like experimenting with new tools/skills even if I‚Äôm not sure they‚Äôll work out.",
      tipTitle:"Miles Morales mindset", tipText:"Growth begins with a leap of faith." }
  ];

  const DIM_LABELS = {
    SE: "Structure & Execution",
    AT: "Analytical Thinking",
    SI: "Social Initiative",
    EC: "Empathy & Cooperation",
    CE: "Curiosity & Experimentation"
  };

  const STYLE_BY_DIM = {
    SE: "Executive",
    AT: "Analyst",
    SI: "Connector",
    EC: "Builder",
    CE: "Explorer"
  };

  // ---- Style content (v1.1 adds everydayTips, beyondWork, overuse) ----
  const STYLE_CONTENT = {
    Executive: {
      tags: ["Ownership","Execution","Clarity","Decisions","Momentum"],
      insight: "You don‚Äôt just discuss‚Äîyou move things forward. People trust you because you turn chaos into structure and drive outcomes to completion.",
      hero: "Captain America + Arjuna (Ownership + Focus)",
      strengths: [
        "Owning outcomes and finishing strong",
        "Creating structure and clear next steps",
        "Making decisions under uncertainty"
      ],
      watchouts: [
        "May sound blunt or impatient when others move slowly",
        "Risk of over-controlling instead of delegating"
      ],
      everydayTips: [
        "Finish one meaningful thing daily (momentum builds confidence)",
        "When something is unclear, define the next step in 2 minutes",
        "Lead by example in civic spaces (queues, traffic, cleanliness)",
        "Delegate one task this week to build trust, not dependence"
      ],
      beyondWork: [
        "Work: you naturally take responsibility when things stall",
        "Teams: people rely on you for direction during confusion",
        "Society: you set standards by following rules even when others don‚Äôt",
        "Self: protect your energy‚Äîdon‚Äôt carry everything alone"
      ],
      overuse: [
        "Burnout from carrying too much responsibility",
        "People may feel unheard if speed becomes the priority"
      ],
      learning: [
        "Goal-based learning (milestones + feedback)",
        "Weekly execution rhythm (small wins)"
      ],
      paths: [
        "Program/Project coordination",
        "Security governance / GRC support",
        "Operations & process excellence",
        "Leadership track roles"
      ]
    },

    Analyst: {
      tags: ["Logic","Patterns","Risk-thinking","Depth","Systems"],
      insight: "You win through clarity. You naturally analyze, validate, and spot gaps others miss‚Äîhelping teams avoid costly mistakes and choose smarter paths.",
      hero: "Iron Man + Doctor Strange (Systems + Scenarios)",
      strengths: [
        "Deep problem-solving and structured thinking",
        "Spotting risks, gaps, edge cases",
        "Learning complex topics quickly"
      ],
      watchouts: [
        "Overthinking can delay action",
        "May undervalue networking/visibility"
      ],
      everydayTips: [
        "Before reacting, ask: ‚ÄòWhat‚Äôs the real root cause?‚Äô",
        "Write your thinking (notes create clarity and confidence)",
        "Pick one skill and go deep for 2 weeks (avoid scattered learning)",
        "Use your logic for civic good: follow systems, improve systems"
      ],
      beyondWork: [
        "Work: you shine in ambiguity by turning it into logic",
        "Teams: people trust you when decisions must be evidence-based",
        "Society: you think system-first (why rules exist, how to improve)",
        "Self: take action even when you‚Äôre at 80% certainty"
      ],
      overuse: [
        "Analysis paralysis (too much thinking, too little shipping)",
        "Perfectionism can reduce confidence and speed"
      ],
      learning: [
        "Concepts ‚Üí case studies ‚Üí practice",
        "Teach-back learning (explain to master)"
      ],
      paths: [
        "Cybersecurity (SOC / Threat Intel)",
        "QA / Testing / Reliability",
        "Data / AI / Analytics",
        "Architecture support roles"
      ]
    },

    Connector: {
      tags: ["Communication","Collaboration","Initiative","Alignment","Energy"],
      insight: "You create momentum through people. You bring teams together, build trust quickly, and reduce confusion through communication and alignment.",
      hero: "Black Panther + Nick Fury (Bridge-builder + Alliance creator)",
      strengths: [
        "Starting conversations and building networks",
        "Aligning people across teams",
        "Keeping collaboration positive and productive"
      ],
      watchouts: [
        "Too many interactions can dilute focus",
        "May avoid hard calls to maintain harmony"
      ],
      everydayTips: [
        "Start one useful conversation per day (opportunity follows)",
        "When groups drift, restate the shared goal in one sentence",
        "Use your influence to improve civic sense (encourage, not preach)",
        "Protect focus: block 60 minutes daily with no messages"
      ],
      beyondWork: [
        "Work: you unblock progress by connecting the right people",
        "Teams: you‚Äôre the glue that prevents misalignment",
        "Society: you naturally build community and shared responsibility",
        "Self: avoid people-pleasing‚Äîchoose quality relationships over quantity"
      ],
      overuse: [
        "Distraction from too many conversations",
        "Avoiding conflict can delay needed decisions"
      ],
      learning: [
        "Group learning + discussions + mentors",
        "Learning by explaining to others"
      ],
      paths: [
        "Business analyst / project coordination",
        "Customer success / community roles",
        "Security awareness programs",
        "Stakeholder-heavy roles"
      ]
    },

    Builder: {
      tags: ["Empathy","Cooperation","Trust","Stability","Care"],
      insight: "You build trust and stability. You balance care for people with responsibility for outcomes‚Äîhelping teams stay calm, aligned, and productive.",
      hero: "Hanuman + Krishna (Strength + Wisdom + Empathy)",
      strengths: [
        "Supporting people without losing accountability",
        "Conflict resolution and collaboration",
        "Creating psychologically safe environments"
      ],
      watchouts: [
        "Absorbing others‚Äô problems ‚Üí burnout risk",
        "Saying yes too often; weak boundaries"
      ],
      everydayTips: [
        "Support people, but set one boundary this week (protect your energy)",
        "In conflict, seek truth + relationship (not only winning)",
        "Choose service with strategy (help where it creates leverage)",
        "Civic tip: respect shared spaces and people who maintain them"
      ],
      beyondWork: [
        "Work: you strengthen teams by raising trust and safety",
        "Teams: people open up to you and feel supported",
        "Society: you naturally promote kindness and responsibility",
        "Self: don‚Äôt carry others‚Äô stress‚Äîpractice detachment + boundaries"
      ],
      overuse: [
        "Emotional fatigue from taking on others‚Äô issues",
        "Avoiding ‚Äòno‚Äô can reduce your own progress"
      ],
      learning: [
        "Mentorship + feedback loops",
        "Real projects in safe environments"
      ],
      paths: [
        "Training / enablement",
        "Security awareness / compliance coordination",
        "People ops / culture roles",
        "Team leadership tracks"
      ]
    },

    Explorer: {
      tags: ["Curiosity","Experimentation","Adaptability","Creativity","Growth"],
      insight: "You grow by experimenting. You learn fast, adapt quickly, and spot new tools and opportunities early. Your career path can be unique‚Äîand that‚Äôs okay.",
      hero: "Miles Morales + Doctor Strange (Leap + Exploration)",
      strengths: [
        "Trying new tools/skills quickly",
        "Creativity + growth mindset",
        "Finding unique career combinations"
      ],
      watchouts: [
        "Jumping too quickly can reduce depth",
        "Starting many things, finishing fewer"
      ],
      everydayTips: [
        "Run learning in 2-week sprints (then reflect)",
        "Finish one project before starting another (build proof)",
        "Try small experiments instead of big risky jumps",
        "Civic tip: innovation + discipline = real development"
      ],
      beyondWork: [
        "Work: you thrive when there‚Äôs room to explore and improve",
        "Teams: you bring fresh ideas and options",
        "Society: you naturally think future-first and improvement-driven",
        "Self: build consistency to match your curiosity"
      ],
      overuse: [
        "Shallow learning from constant switching",
        "Low confidence if many things are started but not finished"
      ],
      learning: [
        "2-week learning sprints + reflection",
        "Try ‚Üí learn ‚Üí adjust cycles"
      ],
      paths: [
        "Security research / exploration",
        "Dev + Security (AppSec starter)",
        "Startup-style roles",
        "Tech education + content"
      ]
    }
  };

  // ---- State ----
  let idx = 0;
  let answers = loadAnswers(); // {Q1:1..5}

  const scaleLabels = [
    {v:1, t:"Strongly Disagree"},
    {v:2, t:"Disagree"},
    {v:3, t:"Neutral"},
    {v:4, t:"Agree"},
    {v:5, t:"Strongly Agree"}
  ];

  // ---- Helpers ----
  function $(id){ return document.getElementById(id); }
  function show(id){ $(id).classList.remove("hide"); }
  function hide(id){ $(id).classList.add("hide"); }

  function start(){
    hide("intro");
    show("quiz");
    idx = firstUnansweredIndex();
    renderQuestion();
  }

  function restart(){
    hide("result");
    show("intro");
    hide("quiz");
    idx = 0;
    updateProgress();
  }

  function resetAll(){
    if(!confirm("Reset all saved answers?")) return;
    answers = {};
    localStorage.removeItem("seedling_answers_v11");
    restart();
  }

  function saveDraft(){
    localStorage.setItem("seedling_answers_v11", JSON.stringify(answers));
    alert("Saved locally ‚úÖ");
  }

  function loadAnswers(){
    try{
      const s = localStorage.getItem("seedling_answers_v11");
      return s ? JSON.parse(s) : {};
    }catch(e){
      return {};
    }
  }

  function firstUnansweredIndex(){
    for(let i=0;i<QUESTIONS.length;i++){
      if(!answers[QUESTIONS[i].id]) return i;
    }
    return 0;
  }

  function updateProgress(){
    const total = QUESTIONS.length;
    const done = Object.keys(answers).filter(k => answers[k]).length;
    const pct = Math.round((done/total)*100);
    $("bar").style.width = pct + "%";
    $("progressText").innerText = (done===0)
      ? "Progress will appear here once you begin."
      : `Progress: ${done}/${total} (${pct}%)`;
  }

  function renderQuestion(){
  updateProgress();
  const q = QUESTIONS[idx];

  // ‚úÖ Hide tip until user answers THIS question
  const tipBox = document.getElementById("tipBox");
  if (!answers[q.id]) tipBox.classList.add("hide");
  else tipBox.classList.remove("hide");

  $("qMeta").innerText = `Question ${idx+1} of ${QUESTIONS.length} ‚Ä¢ ${DIM_LABELS[q.dim]}`;
  $("qText").innerText = q.text;

  $("tipTitle").innerText = "Tip: " + q.tipTitle;
  $("tipText").innerText = q.tipText;

    const wrap = $("scale");
    wrap.innerHTML = "";
    scaleLabels.forEach(s=>{
      const div = document.createElement("div");
      div.className = "opt" + ((answers[q.id]===s.v) ? " selected" : "");
      div.innerHTML = `<strong>${s.v}</strong><span>${s.t}</span>`;
      div.onclick = ()=>selectAnswer(q.id, s.v);
      wrap.appendChild(div);
    });

    $("prevBtn").disabled = (idx===0);
    $("nextBtn").innerText = (idx===QUESTIONS.length-1) ? "Finish" : "Next";
    $("nextBtn").disabled = !answers[q.id];
  }

  function selectAnswer(qid, value){
  answers[qid] = value;
  localStorage.setItem("seedling_answers_v11", JSON.stringify(answers));

  // show reflection tip AFTER answer is locked
  document.getElementById("tipBox").classList.remove("hide");

  renderQuestion();
  }

  function prev(){
    if(idx>0){ idx--; renderQuestion(); }
  }

  function next(){
    const q = QUESTIONS[idx];
    if(!answers[q.id]){
      alert("Please select an option to continue.");
      return;
    }
    if(idx < QUESTIONS.length-1){
      idx++;
      renderQuestion();
    }else{
      finish();
    }
  }

  // ---- Scoring ----
  function finish(){
    const score = {SE:0, AT:0, SI:0, EC:0, CE:0};
    QUESTIONS.forEach(q => score[q.dim] += (answers[q.id] || 0));

    // Primary + secondary dims
    const dims = Object.keys(score).map(d => ({d, v: score[d]}));
    dims.sort((a,b)=> b.v - a.v);

    let primary = dims[0];
    let secondary = dims[1];

    // Tie-breaker: compare each dim's "second question"
    const topVal = primary.v;
    const tied = dims.filter(x => x.v === topVal);
    if(tied.length > 1){
      const secondQ = {SE:"Q3", AT:"Q7", SI:"Q9", EC:"Q8", CE:"Q10"};
      tied.sort((a,b)=>{
        const av = answers[secondQ[a.d]] || 0;
        const bv = answers[secondQ[b.d]] || 0;
        if(bv !== av) return bv - av;
        return (answers["Q1"]||0) - (answers["Q1"]||0);
      });
      primary = tied[0];

      const remaining = dims.filter(x => x.d !== primary.d);
      remaining.sort((a,b)=> b.v - a.v);
      secondary = remaining[0];
    }

    const primaryStyle = STYLE_BY_DIM[primary.d];
    const secondaryStyle = STYLE_BY_DIM[secondary.d];
    renderResults(primaryStyle, secondaryStyle, score);
  }

  function renderResults(primaryStyle, secondaryStyle, score){
    hide("quiz");
    show("result");
    updateProgress();

    const content = STYLE_CONTENT[primaryStyle];

    $("styleName").innerText = `${primaryStyle} (with strong ${secondaryStyle} influence)`;
    $("styleSub").innerText = "This reflects your dominant practiced style, not your only capability.";

    $("insightText").innerText = content.insight;
    $("heroMindset").innerText = content.hero;

    $("tags").innerHTML = content.tags.map(t=>`<span class="tag">${t}</span>`).join("");

    $("strengths").innerHTML = `<ul>${content.strengths.map(x=>`<li>${x}</li>`).join("")}</ul>`;
    $("watchouts").innerHTML = `<ul>${content.watchouts.map(x=>`<li>${x}</li>`).join("")}</ul>`;

    $("everydayTips").innerHTML = content.everydayTips.map(x=>`<li>${x}</li>`).join("");
    $("beyondWork").innerHTML = content.beyondWork.map(x=>`<li>${x}</li>`).join("");
    $("overuse").innerHTML = content.overuse.map(x=>`<li>${x}</li>`).join("");

    $("learningMode").innerHTML = `<ul>${content.learning.map(x=>`<li>${x}</li>`).join("")}</ul>`;
    $("paths").innerHTML = `<ul>${content.paths.map(x=>`<li>${x}</li>`).join("")}</ul>`;

    const dimOrder = ["SE","AT","SI","EC","CE"].map(d => `${DIM_LABELS[d]}: ${score[d]}/10`).join("\n");

    const share = [
      "Seedling Reflection ‚Äî Result Summary",
      "-----------------------------------",
      `Primary style: ${primaryStyle}`,
      `Secondary influence: ${secondaryStyle}`,
      "",
      "Dimension scores:",
      dimOrder,
      "",
      "Hidden superpower:",
      content.insight,
      "",
      "Everyday mindset tips:",
      content.everydayTips.map(x => `- ${x}`).join("\n"),
      "",
      "Superhero mindset:",
      content.hero,
      "",
      "Next step (optional):",
      "Join the Cybersecurity Workshop waitlist (industry experts, beginner-friendly)."
    ].join("\n");

    $("shareBox").innerText = share;
  }

  function copyText(text){
    navigator.clipboard.writeText(text)
      .then(()=>alert("Copied ‚úÖ"))
      .catch(()=>alert("Copy failed. You can manually select and copy."));
  }

  function copyResultSummary(){
    copyText($("shareBox").innerText);
  }

  function joinWaitlist(){
    const name = $("wName").value.trim();
    const email = $("wEmail").value.trim();
    const status = $("wStatus").value;
    const interest = $("wInterest").value;
    const challenge = $("wChallenge").value.trim();

    if(!name || !email){
      alert("Please enter name and email.");
      return;
    }

    const subject = encodeURIComponent("Seedling: Cybersecurity Workshop Waitlist");
    const body = encodeURIComponent(
`Hi Seedling Team,

Please add me to the Cybersecurity Workshop waitlist.

Name: ${name}
Email: ${email}
Status: ${status}
Interest: ${interest}
Challenge: ${challenge || "‚Äî"}

Thanks!`
    );

    window.location.href = `mailto:${EMAIL_TO}?subject=${subject}&body=${body}`;
  }

  // Initial progress
  updateProgress();

  // If user has answers, show helpful progress message
  (function(){
    const done = Object.keys(answers).filter(k => answers[k]).length;
    if(done > 0){
      $("progressText").innerText = `Draft found: ${done}/${QUESTIONS.length} answered. Click Start to continue.`;
    }
  })();
</script>
</body>
</html>
